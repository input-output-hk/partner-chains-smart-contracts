<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>PartnerChains.Scripts.Versioning</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">partner-chains-smart-contracts-8.1.0: Smart contract code used by the partner-chains project.</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">PartnerChains.Scripts.Versioning</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Version Oracle Token minting policy</a></li><li><a href="#g:2">Version Oracle Token validator</a></li><li><a href="#g:3">Version oracle query functions</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc empty">&nbsp;</div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:mkVersionOraclePolicy">mkVersionOraclePolicy</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V1-Data-Tx.html#t:TxOutRef" title="PlutusLedgerApi.V1.Data.Tx">TxOutRef</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V1-Data-Address.html#t:Address" title="PlutusLedgerApi.V1.Data.Address">Address</a> -&gt; <a href="PartnerChains-Types.html#t:VersionOraclePolicyRedeemer" title="PartnerChains.Types">VersionOraclePolicyRedeemer</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V2-Data-Contexts.html#t:ScriptContext" title="PlutusLedgerApi.V2.Data.Contexts">ScriptContext</a> -&gt; <a href="${pkgroot}/../../../../hh783czjqlddq96zxhzijcqv92rb132r-ghc-9.6.6-doc/share/doc/ghc/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a></li><li class="src short"><a href="#v:mkVersionOraclePolicyUntyped">mkVersionOraclePolicyUntyped</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-tx-1.46.0.0-22f72d29fd2ab6ef91b7d55bc38b36549b959defdd1a8c27e1688bda646b05f0/share/doc/html/PlutusTx-Builtins-Internal.html#t:BuiltinUnit" title="PlutusTx.Builtins.Internal">BuiltinUnit</a></li><li class="src short"><a href="#v:compiledVersionOraclePolicy">compiledVersionOraclePolicy</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-tx-1.46.0.0-22f72d29fd2ab6ef91b7d55bc38b36549b959defdd1a8c27e1688bda646b05f0/share/doc/html/PlutusTx-Code.html#t:CompiledCode" title="PlutusTx.Code">CompiledCode</a> (<a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-tx-1.46.0.0-22f72d29fd2ab6ef91b7d55bc38b36549b959defdd1a8c27e1688bda646b05f0/share/doc/html/PlutusTx-Builtins-Internal.html#t:BuiltinUnit" title="PlutusTx.Builtins.Internal">BuiltinUnit</a>)</li><li class="src short"><a href="#v:serialisableVersionOraclePolicy">serialisableVersionOraclePolicy</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:SerialisedScript" title="PlutusLedgerApi.Common">SerialisedScript</a></li><li class="src short"><a href="#v:mkVersionOracleValidator">mkVersionOracleValidator</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="PartnerChains-Types.html#t:VersionOracleDatum" title="PartnerChains.Types">VersionOracleDatum</a> -&gt; <a href="PartnerChains-Types.html#t:VersionOracle" title="PartnerChains.Types">VersionOracle</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V2-Data-Contexts.html#t:ScriptContext" title="PlutusLedgerApi.V2.Data.Contexts">ScriptContext</a> -&gt; <a href="${pkgroot}/../../../../hh783czjqlddq96zxhzijcqv92rb132r-ghc-9.6.6-doc/share/doc/ghc/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a></li><li class="src short"><a href="#v:mkVersionOracleValidatorUntyped">mkVersionOracleValidatorUntyped</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-tx-1.46.0.0-22f72d29fd2ab6ef91b7d55bc38b36549b959defdd1a8c27e1688bda646b05f0/share/doc/html/PlutusTx-Builtins-Internal.html#t:BuiltinUnit" title="PlutusTx.Builtins.Internal">BuiltinUnit</a></li><li class="src short"><a href="#v:compiledVersionOracleValidator">compiledVersionOracleValidator</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-tx-1.46.0.0-22f72d29fd2ab6ef91b7d55bc38b36549b959defdd1a8c27e1688bda646b05f0/share/doc/html/PlutusTx-Code.html#t:CompiledCode" title="PlutusTx.Code">CompiledCode</a> (<a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-tx-1.46.0.0-22f72d29fd2ab6ef91b7d55bc38b36549b959defdd1a8c27e1688bda646b05f0/share/doc/html/PlutusTx-Builtins-Internal.html#t:BuiltinUnit" title="PlutusTx.Builtins.Internal">BuiltinUnit</a>)</li><li class="src short"><a href="#v:serialisableVersionOracleValidator">serialisableVersionOracleValidator</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:SerialisedScript" title="PlutusLedgerApi.Common">SerialisedScript</a></li><li class="src short"><a href="#v:getVersionedValidatorAddress">getVersionedValidatorAddress</a> :: <a href="PartnerChains-Types.html#t:VersionOracleConfig" title="PartnerChains.Types">VersionOracleConfig</a> -&gt; <a href="PartnerChains-Types.html#t:VersionOracle" title="PartnerChains.Types">VersionOracle</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V2-Data-Contexts.html#t:ScriptContext" title="PlutusLedgerApi.V2.Data.Contexts">ScriptContext</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V1-Data-Address.html#t:Address" title="PlutusLedgerApi.V1.Data.Address">Address</a></li><li class="src short"><a href="#v:getVersionedCurrencySymbol">getVersionedCurrencySymbol</a> :: <a href="PartnerChains-Types.html#t:VersionOracleConfig" title="PartnerChains.Types">VersionOracleConfig</a> -&gt; <a href="PartnerChains-Types.html#t:VersionOracle" title="PartnerChains.Types">VersionOracle</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V2-Data-Contexts.html#t:ScriptContext" title="PlutusLedgerApi.V2.Data.Contexts">ScriptContext</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V1-Data-Value.html#t:CurrencySymbol" title="PlutusLedgerApi.V1.Data.Value">CurrencySymbol</a></li><li class="src short"><a href="#v:approvedByGovernance">approvedByGovernance</a> :: <a href="PartnerChains-Types.html#t:VersionOracleConfig" title="PartnerChains.Types">VersionOracleConfig</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V2-Data-Contexts.html#t:ScriptContext" title="PlutusLedgerApi.V2.Data.Contexts">ScriptContext</a> -&gt; <a href="${pkgroot}/../../../../hh783czjqlddq96zxhzijcqv92rb132r-ghc-9.6.6-doc/share/doc/ghc/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Version Oracle Token minting policy</h1></a><div class="doc"><p>This is part of Partner Chains' versioning system. The versioning system stores <code>ScriptId</code>s with their corresponding reference scripts.
This creates indirection that allows replacing scripts in the versioning system with different versions of them.</p><p>Versioned scripts can be looked up using <code><a href="PartnerChains-Scripts-Versioning.html#v:getVersionedCurrencySymbol" title="PartnerChains.Scripts.Versioning">getVersionedCurrencySymbol</a></code> and <code>getVersionedScriptHash</code>.</p><p>Version Oracle Tokens identify authorized versioning UTXOs.</p><p>Redeemers:</p><ol><li value="1"><p><code><a href="PartnerChains-Types.html#v:InitializeVersionOracle" title="PartnerChains.Types">InitializeVersionOracle</a></code> initializes the first VersionOracle UTXO.</p><ul><li>TX has to use the Genesis UTXO as an input.</li><li>TX must mint a single Version Oracle Token.</li><li><p>There must exist exactly one output at the validator address that carries:</p><ul><li>VersionOracleDatum as datum matching script argument,</li><li>a script reference matching script argument,</li><li>and a single Version Oracle Token.</li></ul></li></ul></li><li value="2"><p><code><a href="PartnerChains-Types.html#v:MintVersionOracle" title="PartnerChains.Types">MintVersionOracle</a></code> creates a new VersionOracle UTXO.</p><ul><li>It is a governance action (see <code><a href="PartnerChains-Scripts-Versioning.html#v:approvedByGovernance" title="PartnerChains.Scripts.Versioning">approvedByGovernance</a></code>).</li><li>TX must mint a single Version Oracle Token.</li><li><p>There must exist exactly one output at the validator address that carries:</p><ul><li>VersionOracleDatum as datum matching script argument,</li><li>a script reference matching script argument,</li><li>and a single Version Oracle Token.</li></ul></li></ul></li><li value="3"><p><code><a href="PartnerChains-Types.html#v:BurnVersionOracle" title="PartnerChains.Types">BurnVersionOracle</a></code> spends a VersionOracle UTXO.</p><ul><li>It is a governance action (see <code><a href="PartnerChains-Scripts-Versioning.html#v:approvedByGovernance" title="PartnerChains.Scripts.Versioning">approvedByGovernance</a></code>).</li><li><p>There must exist exactly one input at the validator address that carries:</p><ul><li>VersionOracleDatum as datum matching script argument,</li><li>and a single Version Oracle Token.</li></ul></li><li>There must NOT exist any outputs carrying any Version Oracle Tokens.</li></ul></li></ol><p>Error codes:</p><ul><li>ERROR-VERSION-POLICY-01: Genesis UTXO was not used as input.</li><li>ERROR-VERSION-POLICY-02: There is not a single output at the validator address with
    correct VersionOracleDatum, reference script, and a single version oracle token.</li><li>ERROR-VERSION-POLICY-03: One versioning token was not minted.</li><li>ERROR-VERSION-POLICY-04: There is not a single output at the validator address with
    correct VersionOracleDatum, reference script, and a single version oracle token.</li><li>ERROR-VERSION-POLICY-05: Transaction should be signed by the governance.</li><li>ERROR-VERSION-POLICY-06: One versioning token was not minted.</li><li>ERROR-VERSION-POLICY-07: There is not a single input at the validator address with
    expected old VersionOracleDatum, and a single version oracle token.</li><li>ERROR-VERSION-POLICY-08: There was an output carrying version oracle tokens.</li><li>ERROR-VERSION-POLICY-09: Transaction should be signed by the governance.</li><li>ERROR-VERSION-POLICY-10: Script purpose is not Minting.</li></ul></div><div class="top"><p class="src"><a id="v:mkVersionOraclePolicy" class="def">mkVersionOraclePolicy</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V1-Data-Tx.html#t:TxOutRef" title="PlutusLedgerApi.V1.Data.Tx">TxOutRef</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V1-Data-Address.html#t:Address" title="PlutusLedgerApi.V1.Data.Address">Address</a> -&gt; <a href="PartnerChains-Types.html#t:VersionOraclePolicyRedeemer" title="PartnerChains.Types">VersionOraclePolicyRedeemer</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V2-Data-Contexts.html#t:ScriptContext" title="PlutusLedgerApi.V2.Data.Contexts">ScriptContext</a> -&gt; <a href="${pkgroot}/../../../../hh783czjqlddq96zxhzijcqv92rb132r-ghc-9.6.6-doc/share/doc/ghc/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> <a href="#v:mkVersionOraclePolicy" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkVersionOraclePolicyUntyped" class="def">mkVersionOraclePolicyUntyped</a> <a href="#v:mkVersionOraclePolicyUntyped" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a></td><td class="doc"><p>Genesis Utxo</p></td></tr><tr><td class="src">-&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a></td><td class="doc"><p>Validator address</p></td></tr><tr><td class="src">-&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a></td><td class="doc"><p>Redeemer</p></td></tr><tr><td class="src">-&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a></td><td class="doc"><p>ScriptContext</p></td></tr><tr><td class="src">-&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-tx-1.46.0.0-22f72d29fd2ab6ef91b7d55bc38b36549b959defdd1a8c27e1688bda646b05f0/share/doc/html/PlutusTx-Builtins-Internal.html#t:BuiltinUnit" title="PlutusTx.Builtins.Internal">BuiltinUnit</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:compiledVersionOraclePolicy" class="def">compiledVersionOraclePolicy</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-tx-1.46.0.0-22f72d29fd2ab6ef91b7d55bc38b36549b959defdd1a8c27e1688bda646b05f0/share/doc/html/PlutusTx-Code.html#t:CompiledCode" title="PlutusTx.Code">CompiledCode</a> (<a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-tx-1.46.0.0-22f72d29fd2ab6ef91b7d55bc38b36549b959defdd1a8c27e1688bda646b05f0/share/doc/html/PlutusTx-Builtins-Internal.html#t:BuiltinUnit" title="PlutusTx.Builtins.Internal">BuiltinUnit</a>) <a href="#v:compiledVersionOraclePolicy" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:serialisableVersionOraclePolicy" class="def">serialisableVersionOraclePolicy</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:SerialisedScript" title="PlutusLedgerApi.Common">SerialisedScript</a> <a href="#v:serialisableVersionOraclePolicy" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Version Oracle Token validator</h1></a><div class="doc"><p>Stores VersionOraclePolicy UTXOs, acting both as an oracle of available
scripts as well as a script caching system. UTXOs on the script are managed
by the governance authority, with VersionOraclePolicy ensuring that tokens are
minted and burned correctly.</p><ul><li>Spending from the VersionOracle validator is a governance action (see <code><a href="PartnerChains-Scripts-Versioning.html#v:approvedByGovernance" title="PartnerChains.Scripts.Versioning">approvedByGovernance</a></code>).</li><li><code><a href="PartnerChains-Types.html#t:VersionOracle" title="PartnerChains.Types">VersionOracle</a></code> in redeemer must match the one in the datum.</li><li>Transaction must not transfer any Version Oracle tokens to another address.</li></ul><p>Error codes:</p><ul><li>ERROR-VERSION-VALIDATOR-01: Governance approval is not present</li><li>ERROR-VERSION-VALIDATOR-02: Version oracle in the datum does not match the redeemer</li><li>ERROR-VERSION-VALIDATOR-03: Transaction outputs version tokens to non-versioning address</li><li>ERROR-VERSION-VALIDATOR-04: Invalid script purpose is provided</li><li>ERROR-VERSION-VALIDATOR-05: Transaction does not have own input</li></ul></div><div class="top"><p class="src"><a id="v:mkVersionOracleValidator" class="def">mkVersionOracleValidator</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="PartnerChains-Types.html#t:VersionOracleDatum" title="PartnerChains.Types">VersionOracleDatum</a> -&gt; <a href="PartnerChains-Types.html#t:VersionOracle" title="PartnerChains.Types">VersionOracle</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V2-Data-Contexts.html#t:ScriptContext" title="PlutusLedgerApi.V2.Data.Contexts">ScriptContext</a> -&gt; <a href="${pkgroot}/../../../../hh783czjqlddq96zxhzijcqv92rb132r-ghc-9.6.6-doc/share/doc/ghc/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> <a href="#v:mkVersionOracleValidator" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:mkVersionOracleValidatorUntyped" class="def">mkVersionOracleValidatorUntyped</a> <a href="#v:mkVersionOracleValidatorUntyped" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a></td><td class="doc"><p>Genesis UTXO</p></td></tr><tr><td class="src">-&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a></td><td class="doc"><p>Datum</p></td></tr><tr><td class="src">-&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a></td><td class="doc"><p>Redeemer</p></td></tr><tr><td class="src">-&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a></td><td class="doc"><p>ScriptContext</p></td></tr><tr><td class="src">-&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-tx-1.46.0.0-22f72d29fd2ab6ef91b7d55bc38b36549b959defdd1a8c27e1688bda646b05f0/share/doc/html/PlutusTx-Builtins-Internal.html#t:BuiltinUnit" title="PlutusTx.Builtins.Internal">BuiltinUnit</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:compiledVersionOracleValidator" class="def">compiledVersionOracleValidator</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-tx-1.46.0.0-22f72d29fd2ab6ef91b7d55bc38b36549b959defdd1a8c27e1688bda646b05f0/share/doc/html/PlutusTx-Code.html#t:CompiledCode" title="PlutusTx.Code">CompiledCode</a> (<a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:BuiltinData" title="PlutusLedgerApi.Common">BuiltinData</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-tx-1.46.0.0-22f72d29fd2ab6ef91b7d55bc38b36549b959defdd1a8c27e1688bda646b05f0/share/doc/html/PlutusTx-Builtins-Internal.html#t:BuiltinUnit" title="PlutusTx.Builtins.Internal">BuiltinUnit</a>) <a href="#v:compiledVersionOracleValidator" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:serialisableVersionOracleValidator" class="def">serialisableVersionOracleValidator</a> :: <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-Common.html#t:SerialisedScript" title="PlutusLedgerApi.Common">SerialisedScript</a> <a href="#v:serialisableVersionOracleValidator" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h1>Version oracle query functions</h1></a><div class="top"><p class="src"><a id="v:getVersionedValidatorAddress" class="def">getVersionedValidatorAddress</a> :: <a href="PartnerChains-Types.html#t:VersionOracleConfig" title="PartnerChains.Types">VersionOracleConfig</a> -&gt; <a href="PartnerChains-Types.html#t:VersionOracle" title="PartnerChains.Types">VersionOracle</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V2-Data-Contexts.html#t:ScriptContext" title="PlutusLedgerApi.V2.Data.Contexts">ScriptContext</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V1-Data-Address.html#t:Address" title="PlutusLedgerApi.V1.Data.Address">Address</a> <a href="#v:getVersionedValidatorAddress" class="selflink">#</a></p><div class="doc"><p>Searches for a specified validator script passed as a reference input.
Note that if requested script ID corresponds to a minting policy this
function will return a result anyway without reporting any errors.</p></div></div><div class="top"><p class="src"><a id="v:getVersionedCurrencySymbol" class="def">getVersionedCurrencySymbol</a> :: <a href="PartnerChains-Types.html#t:VersionOracleConfig" title="PartnerChains.Types">VersionOracleConfig</a> -&gt; <a href="PartnerChains-Types.html#t:VersionOracle" title="PartnerChains.Types">VersionOracle</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V2-Data-Contexts.html#t:ScriptContext" title="PlutusLedgerApi.V2.Data.Contexts">ScriptContext</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V1-Data-Value.html#t:CurrencySymbol" title="PlutusLedgerApi.V1.Data.Value">CurrencySymbol</a> <a href="#v:getVersionedCurrencySymbol" class="selflink">#</a></p><div class="doc"><p>Searches for a specified minting policy passed as a reference input.  Note
that if requested script ID corresponds to a validator this function will
return a result anyway without reporting any errors.</p></div></div><div class="top"><p class="src"><a id="v:approvedByGovernance" class="def">approvedByGovernance</a> :: <a href="PartnerChains-Types.html#t:VersionOracleConfig" title="PartnerChains.Types">VersionOracleConfig</a> -&gt; <a href="file:///var/lib/github-runner-work/runner11/.local/state/cabal/store/ghc-9.6.6/plutus-ledger-api-1.46.0.0-bb6dad3e4a179aad5287eb5912955c6e1293f821d11577c7fc0631819d411860/share/doc/html/PlutusLedgerApi-V2-Data-Contexts.html#t:ScriptContext" title="PlutusLedgerApi.V2.Data.Contexts">ScriptContext</a> -&gt; <a href="${pkgroot}/../../../../hh783czjqlddq96zxhzijcqv92rb132r-ghc-9.6.6-doc/share/doc/ghc/html/libraries/Cabal-syntax-3.10.3.0/Distribution-Compat-Prelude.html#t:Bool" title="Distribution.Compat.Prelude">Bool</a> <a href="#v:approvedByGovernance" class="selflink">#</a></p><div class="doc"><p>Check whether a given transaction is approved by Partner Chain governance.
The actual check is delegated to a governance minting policy stored in the
versioning system. Caller specifies the requested governance version.
The transaction must mint at least one token of the governance minting policy to
signify transaction approval.</p><p>Scripts calling <code><a href="PartnerChains-Scripts-Versioning.html#v:approvedByGovernance" title="PartnerChains.Scripts.Versioning">approvedByGovernance</a></code> must provide the VersionOracle UTXO for
<code><a href="PartnerChains-ScriptId.html#v:governancePolicyId" title="PartnerChains.ScriptId">governancePolicyId</a></code> as a reference input.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>