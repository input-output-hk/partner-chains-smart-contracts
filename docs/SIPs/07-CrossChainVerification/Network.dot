digraph {
  node [shape=square style=rounded]
  splines=false
  rankdir=LR

  subgraph cluster_mainchain {
    label="Mainchain only node"
    style=dashed

    M [label = "Mainchain node"]
  }

  subgraph cluster_sidechain_a {
    label="Sidechain only node"
    style=dashed

    A_M [label = "Mainchain node"]
    A_SA [label = "Sidechain A node"]

    A_M -> A_SA [label = "observing", style = dashed, dir = back]
  }

  subgraph cluster_sidechain_b {
    label="Cross verifier sidechain node"
    style=dashed

    B_M [label = "Mainchain node"]
    B_SA [label = "Sidechain A node"]
    B_SB [label = "Sidechain B node"]

    B_M -> B_SB [label = "observing", style = dashed, dir = back]
    B_SA -> B_SB [label = "observing", style = dashed, dir = back]
  }

  M -> A_M -> B_M -> M [dir = both]

}
