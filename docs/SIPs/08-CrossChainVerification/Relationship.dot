digraph {
  node [shape=square style=rounded]
  splines=false
  rankdir=LR

  subgraph cluster_mainchain {
    label="Mainchain"
    labeljust=l
    style=dashed

    mainchain_a [label = "Mainchain contracts\nfor sidechain A"]
    mainchain_b [label = "Mainchain contracts\nfor sidechain B"]

    {rank=same; mainchain_b -> mainchain_a [dir=both minlen=2] }
  }

  subgraph cluster_sidechains {
    style="setlinewidth(0)"

    subgraph cluster_sidechain_A {
      label="Sidechain A"
      labeljust=l
      style=dashed

      sidechain_a [label = "Sidechain A"]
      sidechain_a_bridge [label = "Bridge for\nSidechain A"]
    }

    subgraph cluster_sidechain_B {
      label="Sidechain B"
      labeljust=l
      style=dashed

      sidechain_b [label = "Sidechain B"]
      sidechain_b_bridge [label = "Bridge for\nSidechain B"]
    }
  }

  mainchain_a -> sidechain_a_bridge [dir=both]
  mainchain_b -> sidechain_b_bridge [dir=both]

  sidechain_a_bridge -> sidechain_a [dir=both]
  sidechain_b_bridge -> sidechain_b [dir=both]
}
